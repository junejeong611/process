"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[237],{2237:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(5043),r=s(108),n=s(5748),o=s(7734),i=s(2185),d=s(6026),l=s(6150),c=s(168),m=s(6931),h=s(579);const x=()=>localStorage.getItem("token")||sessionStorage.getItem("token"),g=()=>{const[e,t]=(0,a.useState)("week"),s=(0,a.useMemo)((()=>(()=>{try{const e=x();return e&&JSON.parse(atob(e.split(".")[1])).userId||null}catch(e){return console.error("Error extracting userId from token:",e),null}})()),[]),{data:g,isLoading:u,error:j}=(0,m.I)({queryKey:["emotional-timeline",e,s],queryFn:async()=>{const t=x(),a=await fetch(`/api/insights/${s}/emotional-timeline?period=${e}`,{headers:{Authorization:`Bearer ${t}`}}),r=await a.json();if(!r.success)throw new Error("Failed to load emotional timeline data");return r.data},staleTime:3e5,cacheTime:18e5,retry:2});if(u)return(0,h.jsx)("div",{className:"chart-loading",children:"Loading emotional timeline..."});if(j)return(0,h.jsx)("div",{className:"error-card error-card--warning",children:(0,h.jsxs)("div",{className:"error-card__content",children:[(0,h.jsx)("div",{className:"error-card__icon",children:"\ud83d\udcc8"}),(0,h.jsx)("div",{className:"error-card__text",children:(0,h.jsx)("p",{className:"error-card__message",children:j.message})})]})});return!(null!==g&&void 0!==g&&g.length)||g.every((e=>["anger","sadness","fear","shame","disgust"].every((t=>0===e[t]))))?(0,h.jsx)("div",{className:"empty-emotional-timeline",children:(0,h.jsxs)("div",{className:"empty-state-message",style:{textAlign:"center"},children:[(0,h.jsx)("h4",{children:"No emotional data yet"}),(0,h.jsx)("p",{children:"Share more about how you're feeling to see your emotional timeline."})]})}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"section-header-simple",children:[(0,h.jsx)("h3",{children:"emotional timeline"}),(0,h.jsxs)("p",{children:["your emotional patterns over the past ",e]}),(0,h.jsxs)("div",{className:"period-selector",children:[(0,h.jsx)("button",{onClick:()=>t("week"),className:"week"===e?"active":"",children:"this week"}),(0,h.jsx)("button",{onClick:()=>t("month"),className:"month"===e?"active":"",children:"this month"})]})]}),(0,h.jsx)("div",{className:"chart-container",children:(0,h.jsx)(r.u,{width:"100%",height:400,aspect:2.5,children:(0,h.jsxs)(n.b,{data:g,margin:{top:10,right:30,left:0,bottom:0},children:[(0,h.jsx)(o.d,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),(0,h.jsx)(i.W,{dataKey:"date",tick:{fontSize:12,fill:"#64748b"},tickFormatter:e=>new Date(e).toLocaleDateString("en-US",{weekday:"short"})}),(0,h.jsx)(d.h,{tick:{fontSize:12,fill:"#64748b"},domain:[0,10]}),(0,h.jsx)(l.m,{contentStyle:{backgroundColor:"white",border:"1px solid #e2e8f0",borderRadius:"8px",fontSize:"14px"},labelFormatter:e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),(0,h.jsx)(c.N,{type:"monotone",dataKey:"anger",stroke:"#ef4444",strokeWidth:2,dot:{r:4},name:"anger"}),(0,h.jsx)(c.N,{type:"monotone",dataKey:"sadness",stroke:"#3b82f6",strokeWidth:2,dot:{r:4},name:"sadness"}),(0,h.jsx)(c.N,{type:"monotone",dataKey:"fear",stroke:"#f97316",strokeWidth:2,dot:{r:4},name:"fear"}),(0,h.jsx)(c.N,{type:"monotone",dataKey:"shame",stroke:"#a855f7",strokeWidth:2,dot:{r:4},name:"shame"}),(0,h.jsx)(c.N,{type:"monotone",dataKey:"disgust",stroke:"#10b981",strokeWidth:2,dot:{r:4},name:"disgust"})]})})}),(0,h.jsx)("div",{className:"emotion-legend",children:["anger","sadness","fear","shame","disgust"].map((e=>(0,h.jsxs)("div",{className:"emotion-legend-item",children:[(0,h.jsx)("div",{className:"legend-color",style:{backgroundColor:{anger:"#ef4444",sadness:"#3b82f6",fear:"#f97316",shame:"#a855f7",disgust:"#10b981"}[e]}}),(0,h.jsx)("div",{className:"legend-text",children:(0,h.jsx)("div",{className:"legend-label",children:e})})]},e)))})]})},u=a.memo(g)}}]);
//# sourceMappingURL=237.70452df5.chunk.js.map